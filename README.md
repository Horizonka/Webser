# Webser
#linux


1. 服务端运行一段时间后 发生 double free 崩溃或段错误（core dumped）  


● 初步检查发现线程池中对 task->arg 的 free 位置存在潜在重复释放的风险
● 代码中有一处 free(task->arg)，而调用者可能也在使用完任务后释放了同一个指针
重复释放同一块内存，导致double free 
解决方案：任务参数的所有权归属在线程处理函数中（handle_client）在线程处理函数中统一释放。



2.网页上有些图片加载不出来，检查了很多地方，路径，读取方式等等，还是未加载出
过多线程会带来上下文切换开销。特别是你的任务队列很大时：
● 太多请求积压在队列中
● 响应变慢
● 浏览器以为资源加载失败（超时）
解决方案： 调小线程池规模  减少了线程数和任务队列大小
